# 转型

## 向上转型(upcasting)

注意: parent=child，父类引用指向子类对象就是向上转型  
1. 等价于：parent=(Parent)child;
2. parent引用的是子类实例
3. parent只能引用与父类成员同名的那些成员
4. parent.变量，引用的是父类中的变量【变量：静态绑定
5. parent.成员方法，引用的是子类的方法【方法：动态绑定

```java
Animal a=new Cat();//父类引用指向子类对象,向上转型
a.eat();//方法-动态绑定,猫吃鱼
//a.playGame();动物类没有此方法

System.out.println(a.age);//变量-静态绑定，动物年龄5000
//System.out.println(a.weight);动物类没有此变量
```

## 向下转型(downcasting)

```java
Cat c=(Cat)a;
c.eat();
c.playGame();
System.out.println(c.age);
System.out.println(c.weight);
```

注意: child = (Child) parent ；子类型 对象名 = (子类型)父类引用  

1. java检查：parent对象引用的实例是不是子类对象，如果是进行转换。否则引起ClassCastException异常。
2. 检查语句：instanceof 。格式：对象 instanceof  类
3. **child.**变量、**child.**方法：子类的变量或方法。

# 多态

定义：对于同一个消息，同一个类的对象（引用）可以作出不同反映的现象被称为多态性。

实现：Upcasting后，parent对象（引用）通过调用若干个child对象的相同签名的成员方法，
使得若干个child对象体现多态性。

多态：**动态绑定**的结果， 属于**运行**时的现象。 

<img src="C:\Users\Hery\Desktop\GitHub\java\image\image-20200204163931533.png" alt="image-20200204163931533" style="zoom: 50%;" />


多态的前提
- 要有继承或实现关系
- 要有方法的重写
- 要有父类引用指向子类对象 

多态的好处与弊端

- 好处
提高程序的扩展性。
定义方法时候，使用父类型作为参数，在使用的时候，使用具体的子类型参与操作
- 弊端
不能使用子类的特有成员。

# 抽象类及其多态

```java
//抽象类的定义
public abstract class Animal {
    
    //抽象方法的定义
	public abstract void eat();
}

```
抽象类特点：
- 抽象类有==抽象方法【没有方法体】==，也可以有普通方法
- 抽象类不能实例化
- 抽象类主要是用来派生(derive)子类，且在子类中必须==重写抽象类中的所有抽象方法==，实现多态
- 如果没有实现，则子类也必须定义为抽象类。
- static 、private 和final修饰符不能**修饰**抽象方法和抽象类 。



# 接口及其多态
**接口特点：**
- 接口是一种更特殊的抽象类，内部只允许包含==常量==和==抽象方法==。
- 成员变量默认修饰符public static final【可以不写
- 成员方法默认修饰符public abstract【可以不写
-接口规范公共操作方法，不实现具体操作细节。　


```java
public interface Jumping {
    public static final int height=100;
    public abstract void jump();
}
```
**接口实现类**
- 重写接口抽象方法
- 定义为抽象类

```java
public class Cat implements Jumping {
    @Override
    public void jump() {
        System.out.println("cat jump "+height+" m");
    }
}
```

<img src="C:\Users\Hery\Desktop\GitHub\java\image\image-20200205105942183.png" alt="image-20200205105942183" style="zoom:50%;" />

#类和接口的关系

1、类和类：==继承关系==【单继承，但是可以多层继】

2、类和接口：==实现关系==【多实现】

```java
public class InterImpl extends Object implements Inter1,Inter2 {
}
```

3、接口和接口：==继承关系==【多继承】

```java
public interface Inter3 extends Inter1,Inter2 {
}
```

抽象类和接口的区别：

- 抽象类：
变量,常量；有构造方法；有抽象方法,也有非抽象方法【普通类+抽象方法】
- 接口：
常量；抽象方法  